<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Khata Pro | Khagesh ai-nexa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #000; color: white; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.05); border-radius: 24px; }
        .emerald-glow { border-left: 4px solid #10b981; box-shadow: 0 0 15px rgba(16, 185, 129, 0.05); }
    </style>
</head>
<body class="p-5 max-w-md mx-auto pb-32">

    <div class="flex justify-between items-end mb-8 pt-4">
        <div>
            <h1 class="text-3xl font-black italic tracking-tighter uppercase text-emerald-500">NEXA <span class="text-white">KHATA</span></h1>
            <p id="liveTime" class="text-[10px] font-bold opacity-40 mt-1 tracking-[2px]"></p>
        </div>
        <div class="text-right">
            <p class="text-[8px] font-black opacity-20 uppercase">Business Suite</p>
            <p class="text-[10px] font-bold italic text-emerald-400">Khagesh ai-nexa</p>
        </div>
    </div>

    <div class="relative mb-6">
        <i class="fas fa-search absolute left-4 top-3.5 text-[10px] opacity-30"></i>
        <input type="text" id="searchBox" onkeyup="render()" placeholder="Search customer name..." class="w-full p-3 pl-10 bg-white/5 rounded-xl text-xs border border-white/5 outline-none focus:border-emerald-500/50">
    </div>

    <div class="glass p-6 mb-8 border-b-2 border-emerald-500/30">
        <input type="text" id="cName" placeholder="Customer Name" class="w-full p-3 bg-white/5 rounded-xl mb-3 text-xs outline-none border border-white/5">
        <div class="grid grid-cols-2 gap-3 mb-3">
            <input type="number" id="cPhone" placeholder="Phone (91...)" class="p-3 bg-white/5 rounded-xl text-xs outline-none border border-white/5">
            <input type="number" id="cAmt" placeholder="Amount ₹" class="p-3 bg-white/5 rounded-xl text-xs outline-none border border-white/5">
        </div>
        <button onclick="addEntry()" class="w-full bg-emerald-600 text-white py-3 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg shadow-emerald-600/20">Add Transaction</button>
    </div>

    <div id="kList" class="space-y-4"></div>

    <div class="fixed bottom-0 left-0 w-full p-6 bg-black/90 backdrop-blur-xl border-t border-white/5">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div class="flex gap-8">
                <a href="mailto:magicalkhagesh888@gmail.com" class="text-emerald-500 text-xl"><i class="fas fa-envelope"></i></a>
                <a href="https://www.instagram.com/khagesh_ai_nexa?igsh=a2tjMGRpMWRkeWtx" target="_blank" class="text-emerald-500 text-xl"><i class="fab fa-instagram"></i></a>
            </div>
            <button onclick="exportData()" class="bg-white/5 px-4 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest border border-white/10 hover:bg-white/10 transition">Backup Data</button>
        </div>
    </div>

    <script>
        let khata = JSON.parse(localStorage.getItem('nexa_khata_pro')) || [];

        function addEntry() {
            const name = document.getElementById('cName').value;
            const phone = document.getElementById('cPhone').value;
            const amt = document.getElementById('cAmt').value;

            if(name && amt) {
                khata.unshift({ id: Date.now(), name, phone: phone || '', amt, date: new Date().toLocaleDateString() });
                save();
                clear();
            }
        }

        function save() {
            localStorage.setItem('nexa_khata_pro', JSON.stringify(khata));
            render();
        }

        function render() {
            const list = document.getElementById('kList');
            const term = document.getElementById('searchBox').value.toLowerCase();
            list.innerHTML = '';

            khata.filter(item => item.name.toLowerCase().includes(term)).forEach(item => {
                list.innerHTML += `
                    <div class="glass p-5 emerald-glow flex justify-between items-center">
                        <div class="flex-1">
                            <p class="text-xs font-black uppercase italic tracking-tight">${item.name}</p>
                            <p class="text-[9px] opacity-40">${item.date}</p>
                        </div>
                        <div class="text-right flex items-center gap-4">
                            <p class="text-sm font-black text-emerald-400 italic">₹${item.amt}</p>
                            <div class="flex gap-3 ml-4 border-l border-white/5 pl-4">
                                ${item.phone ? `<a href="tel:${item.phone}" class="text-blue-400 text-xs"><i class="fas fa-phone-alt"></i></a>` : ''}
                                ${item.phone ? `<button onclick="sendWA('${item.phone}', '${item.name}', '${item.amt}')" class="text-emerald-500 text-xs"><i class="fab fa-whatsapp"></i></button>` : ''}
                                <button onclick="deleteEntry(${item.id})" class="text-rose-500/20 text-[10px]"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>`;
            });
        }

        function sendWA(ph, n, a) {
            const msg = `*Khata Update - Khagesh ai-nexa*%0AHello ${n}, aapka balance ₹${a} record kiya gaya hai.`;
            window.open(`https://wa.me/${ph}?text=${msg}`);
        }

        function deleteEntry(id) { khata = khata.filter(x => x.id !== id); save(); }
        function clear() { document.getElementById('cName').value = ''; document.getElementById('cPhone').value = ''; document.getElementById('cAmt').value = ''; }
        
        function exportData() {
            const blob = new Blob([JSON.stringify(khata)], {type: "application/json"});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Khata_Backup_${new Date().toLocaleDateString()}.json`;
            a.click();
        }

        setInterval(() => {
            document.getElementById('liveTime').innerText = new Date().toLocaleTimeString();
        }, 1000);

        render();
    </script>
</body>
</html>
